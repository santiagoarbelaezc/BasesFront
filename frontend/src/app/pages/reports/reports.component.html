<app-navbar></app-navbar>

<div class="main-container">

  <section class="contenedor-titulo-usuarios">
    <h1 id="titulo-gestion-usuarios">Reportes Acad√©micos</h1>
  </section>

  <!-- Pesta√±as -->
  <nav class="tabs-container">
    <button class="tab-btn" [class.active]="tabActiva === 'examenes'" (click)="tabActiva = 'examenes'">1Ô∏è‚É£ Ex√°menes Presentados</button>
    <button class="tab-btn" [class.active]="tabActiva === 'estadisticas'" (click)="tabActiva = 'estadisticas'">2Ô∏è‚É£ Estad√≠sticas por Pregunta</button>
    <button class="tab-btn" [class.active]="tabActiva === 'resumen'" (click)="tabActiva = 'resumen'">3Ô∏è‚É£ Resumen del Curso</button>
    <button class="tab-btn" [class.active]="tabActiva === 'notas'" (click)="tabActiva = 'notas'">4Ô∏è‚É£ Notas por Curso</button>
  </nav>

  <section class="tab-content">

    <!-- 1Ô∏è‚É£ Ex√°menes Presentados -->
<div *ngIf="tabActiva === 'examenes'">
  <h3>Listado de Ex√°menes Presentados</h3>

  <!-- Filtro por examen -->
  <label for="examenSelect">Selecciona un examen:</label>
  <select id="examenSelect" [(ngModel)]="examenSeleccionadoId" (change)="cargarExamenFiltrado()">
    <option [value]="null" disabled>-- Elegir examen --</option>
    <option *ngFor="let ex of listaExamenes" [value]="ex.id">{{ ex.nombre }}</option>
  </select>

  <!-- Bot√≥n para exportar PDF -->
  <div style="margin: 20px 0;">
    <button (click)="generarPDF()" class="btn-update">üì• Descargar informe PDF</button>
  </div>

  <!-- Contenedor a capturar para el PDF -->
  <div id="reporteExamenes">
    <!-- Tabla -->
    <table *ngIf="examenesFiltrados.length > 0" class="user-table" style="margin-top: 20px;">
      <thead>
        <tr>
          <th>Estudiante</th>
          <th>Examen</th>
          <th>Fecha</th>
          <th>Puntaje</th>
          <th>Duraci√≥n</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let examen of examenesFiltrados">
          <td>{{ examen.estudiante }}</td>
          <td>{{ examen.examen }}</td>
          <td>{{ examen.fecha | date:'shortDate' }}</td>
          <td>{{ examen.puntaje }}%</td>
          <td>{{ examen.tiempo }}</td>
        </tr>
      </tbody>
    </table>

    <!-- Gr√°fico -->
    <div *ngIf="examenesFiltrados.length > 0" style="max-width: 600px; margin-top: 30px;">
      <canvas baseChart
              [data]="graficoExamenes"
              [type]="'bar'"
              [options]="{ responsive: true }">
      </canvas>
    </div>
  </div>
</div>


    <!-- Resto sin cambios... -->
    <!-- (pesta√±as 2, 3 y 4 siguen igual) -->
    <!-- ... -->
  </section>
</div>
